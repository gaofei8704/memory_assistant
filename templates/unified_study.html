<!-- templates/unified_study.html -->
{% extends "base.html" %}

{% block title %}ç»Ÿä¸€å­¦ä¹  - {{ deck.name }}{% endblock %}

{% block content %}
<div class="container">
    <div class="study-header">
        <h2>{{ deck.name }}</h2>
        <div class="session-info">
            <div class="session-progress">
                <span id="progressText">0/0</span>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>
            <div class="study-timer">
                <span id="studyTimer">00:00:00</span>
            </div>
            <button class="btn btn-secondary" onclick="endStudyEarly()">æå‰ç»“æŸ</button>
        </div>
    </div>

    <div class="study-container">
        <!-- å†…å®¹æ˜¾ç¤ºåŒºåŸŸ -->
        <div class="content-display" id="studyContent">
            <div class="loading-message">
                <p>åŠ è½½å­¦ä¹ å†…å®¹ä¸­...</p>
            </div>
        </div>

        <!-- ç­”æ¡ˆè¾“å…¥åŒºåŸŸ -->
        <div class="study-input" id="studyInput" style="display: none;">
            <h3>è¯·è¾“å…¥ç­”æ¡ˆ:</h3>
            <textarea id="userInput" placeholder="" rows="3"></textarea>
            <div class="input-actions">
                <button class="btn btn-primary" onclick="submitAnswer()">æäº¤ç­”æ¡ˆ</button>
                <button class="btn btn-secondary" onclick="showAnswer()">æŸ¥çœ‹ç­”æ¡ˆ</button>
            </div>
        </div>

        <!-- ç»“æœåé¦ˆåŒºåŸŸ -->
        <div class="study-result" id="studyResult" style="display: none;">
            <div class="result-content">
                <h3 id="resultTitle">ç»“æœ</h3>
                <div class="answer-comparison">
                    <div class="user-answer">
                        <strong>ä½ çš„ç­”æ¡ˆ:</strong>
                        <span id="userAnswerText"></span>
                    </div>
                    <div class="correct-answer">
                        <strong>æ­£ç¡®ç­”æ¡ˆ:</strong>
                        <span id="correctAnswerText"></span>
                    </div>
                </div>
                <div class="example-section" id="exampleSection" style="display: none;">
                    <strong>ç¤ºä¾‹:</strong>
                    <p id="exampleText"></p>
                </div>
                        <button class="btn btn-easy" onclick="markAsTooEasy()">
                        <span>å¤ªç®€å•äº†</span>
                        <small>æˆ‘å·²ç»å®Œå…¨è®°ä½</small>
                    </button>
                    <button class="btn btn-next" onclick="moveToNextContent()">
                        <span>ä¸‹ä¸€ä¸ª</span>
                        <small>ç»§ç»­å­¦ä¹ </small>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.study-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid #e9ecef;
}

.session-info {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.session-progress {
    min-width: 200px;
}

.session-progress span {
    font-weight: 600;
    color: #2c3e50;
}

.progress-bar {
    height: 8px;
    background: #e9ecef;
    border-radius: 4px;
    overflow: hidden;
    margin-top: 0.5rem;
}

.progress-fill {
    height: 100%;
    background: #3498db;
    transition: width 0.3s;
    width: 0%;
}

.study-container {
    max-width: 600px;
    margin: 0 auto;
}

.content-display {
    background: white;
    padding: 3rem 2rem;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    margin-bottom: 2rem;
    text-align: center;
    min-height: 200px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.content-text {
    font-size: 1.8rem;
    font-weight: bold;
    color: #2c3e50;
    margin-bottom: 1rem;
}

.content-type {
    display: inline-block;
    background: #e9ecef;
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-size: 0.8rem;
    color: #6c757d;
    text-transform: uppercase;
}

.study-input {
    background: white;
    padding: 2rem;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    margin-bottom: 2rem;
}

.study-input h3 {
    margin-top: 0;
    color: #2c3e50;
}

#userInput {
    width: 100%;
    padding: 1rem;
    font-size: 1.1rem;
    border: 2px solid #dee2e6;
    border-radius: 6px;
    margin-bottom: 1rem;
    transition: border-color 0.3s;
    resize: vertical;
    min-height: 80px;
}

#userInput:focus {
    outline: none;
    border-color: #3498db;
}

.input-actions {
    display: flex;
    gap: 1rem;
    justify-content: center;
}

.study-result {
    background: white;
    padding: 2rem;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    margin-bottom: 2rem;
}

.answer-comparison {
    margin-bottom: 1.5rem;
}

.user-answer, .correct-answer {
    margin-bottom: 1rem;
    padding: 1rem;
    border-radius: 6px;
}

.user-answer {
    background: #f8f9fa;
    border-left: 4px solid #6c757d;
}

.correct-answer {
    background: #e8f5e8;
    border-left: 4px solid #27ae60;
}

.example-section {
    padding: 1rem;
    background: #fff3e0;
    border-radius: 6px;
    border-left: 4px solid #f39c12;
    margin-bottom: 1.5rem;
}
.action-buttons {
    display: flex;
    gap: 1rem;
    margin-bottom: 1.5rem;
    flex-wrap: wrap;
}

.btn-easy {
    background-color: #95a5a6;
    color: white;
    flex: 1;
    min-width: 120px;
}

.btn-easy:hover {
    background-color: #7f8c8d;
}

.btn-next {
    background-color: #3498db;
    color: white;
    flex: 1;
    min-width: 120px;
}

.btn-next:hover {
    background-color: #2980b9;
}

.btn-remember {
    background-color: #27ae60;
    color: white;
    flex: 1;
    min-width: 120px;
}

.btn-remember:hover {
    background-color: #219653;
}

.btn-forget {
    background-color: #e74c3c;
    color: white;
    flex: 1;
    min-width: 120px;
}

.btn-forget:hover {
    background-color: #c0392b;
}

.navigation-buttons {
    text-align: center;
}

.btn-next {
    background-color: #3498db;
    color: white;
    padding: 0.75rem 2rem;
}

.btn-next:hover {
    background-color: #2980b9;
}

.loading-message, .error-message {
    text-align: center;
    color: #6c757d;
    font-size: 1.1rem;
}

.correct .user-answer {
    border-left-color: #27ae60;
    background: #e8f5e8;
}

.incorrect .user-answer {
    border-left-color: #e74c3c;
    background: #f8d7da;
}

.empty-state, .completion-state {
    text-align: center;
    padding: 2rem;
}

.empty-state p, .completion-state p {
    font-size: 1.2rem;
    color: #6c757d;
    margin-bottom: 1.5rem;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
    .study-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }

    .session-info {
        width: 100%;
        justify-content: space-between;
    }

    .feedback-buttons {
        flex-direction: column;
    }

    .btn-easy, .btn-remember, .btn-forget {
        width: 100%;
    }

    .content-display {
        padding: 2rem 1rem;
    }

    .content-text {
        font-size: 1.5rem;
    }
}
</style>

<script>
// å½“å‰å­¦ä¹ çŠ¶æ€
let currentStudy = {
    id: null,
    content: [],
    currentIndex: 0,
    startTime: Date.now()
};

// é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', function() {
    startUnifiedStudy({{ deck.id }});
});

// å¼€å§‹ç»Ÿä¸€å­¦ä¹ 
async function startUnifiedStudy(deckId) {
    try {
        const response = await fetch('/api/study/unified/start', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                deck_id: deckId,
                daily_goal: 20
            })
        });

        const result = await response.json();

        if (result.success) {
            currentStudy.id = result.batch_id;
            currentStudy.content = result.content;
            currentStudy.currentIndex = 0;
            showCurrentContent();
            updateProgress();
        } else {
            showError(result.message || 'åŠ è½½å­¦ä¹ å†…å®¹å¤±è´¥');
        }
    } catch (error) {
        showError('ç½‘ç»œé”™è¯¯: ' + error.message);
    }
}

// æ˜¾ç¤ºå½“å‰å­¦ä¹ å†…å®¹
function showCurrentContent() {
    if (currentStudy.content.length === 0) {
        showEmptyState();
        return;
    }

    if (currentStudy.currentIndex >= currentStudy.content.length) {
        showCompletionState();
        return;
    }

    const content = currentStudy.content[currentStudy.currentIndex];

    document.getElementById('studyContent').innerHTML = `
        <div>
            <div class="content-text">${escapeHtml(content.display_text)}</div>
            <span class="content-type">${content.type}</span>
        </div>
    `;

    // è®¾ç½®è¾“å…¥æ¡†å ä½ç¬¦å¹¶æ˜¾ç¤º
    document.getElementById('userInput').placeholder = content.input_placeholder;
    document.getElementById('studyInput').style.display = 'block';
    document.getElementById('studyResult').style.display = 'none';
    document.getElementById('userInput').value = '';
    document.getElementById('userInput').focus();

    currentStudy.startTime = Date.now();
}

// æäº¤ç­”æ¡ˆ
function submitAnswer() {
    const userInput = document.getElementById('userInput').value.trim();
    if (!userInput) {
        alert('è¯·è¾“å…¥ç­”æ¡ˆ');
        return;
    }

    document.getElementById('studyInput').style.display = 'none';
    showResult(userInput);
}

// æ˜¾ç¤ºç­”æ¡ˆå’Œç¤ºä¾‹
function showAnswer() {
    const userInput = document.getElementById('userInput').value.trim() || 'æœªä½œç­”';
    document.getElementById('studyInput').style.display = 'none';
    showResult(userInput, true);
}

// æ˜¾ç¤ºç»“æœ
function showResult(userInput, showedAnswer = false) {
    if (currentStudy.content.length === 0 || currentStudy.currentIndex >= currentStudy.content.length) {
        return;
    }

    const content = currentStudy.content[currentStudy.currentIndex];
    const isCorrect = userInput.toLowerCase() === content.answer.toLowerCase();

    const resultTitle = document.getElementById('resultTitle');
    const userAnswerText = document.getElementById('userAnswerText');
    const correctAnswerText = document.getElementById('correctAnswerText');
    const exampleSection = document.getElementById('exampleSection');
    const exampleText = document.getElementById('exampleText');

    // è®¾ç½®ç»“æœæ ‡é¢˜
    if (showedAnswer) {
        resultTitle.textContent = 'ç­”æ¡ˆå·²æ˜¾ç¤º';
    } else {
        resultTitle.textContent = isCorrect ? 'å›ç­”æ­£ç¡®ï¼' : 'å›ç­”é”™è¯¯';
    }

    // è®¾ç½®ç­”æ¡ˆå¯¹æ¯”
    userAnswerText.textContent = userInput;
    correctAnswerText.textContent = content.answer;

    // è®¾ç½®ç¤ºä¾‹
    if (content.example) {
        exampleText.textContent = content.example;
        exampleSection.style.display = 'block';
    } else {
        exampleSection.style.display = 'none';
    }

    // è®¾ç½®æ ·å¼
    const resultSection = document.getElementById('studyResult');
    resultSection.className = 'study-result';
    if (!showedAnswer) {
        if (isCorrect) {
            resultSection.classList.add('correct');
        } else {
            resultSection.classList.add('incorrect');
        }
    }

    // æ˜¾ç¤ºç»“æœåŒºåŸŸ
    resultSection.style.display = 'block';
}


// ä¿®æ”¹ markAsTooEasy å‡½æ•°
async function markAsTooEasy() {
    if (currentStudy.content.length === 0 || currentStudy.currentIndex >= currentStudy.content.length) {
        return;
    }

    const responseTime = Math.floor((Date.now() - currentStudy.startTime) / 1000);
    const currentContent = currentStudy.content[currentStudy.currentIndex];
    const userInput = document.getElementById('userInput').value;

    try {
        // è®°å½•å­¦ä¹ è¿›åº¦ï¼Œæ ‡è®°ä¸ºå¤ªç®€å•
        const response = await fetch('/api/study/unified/record', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                batch_id: currentStudy.id,
                content_id: currentContent.id,
                deck_id: {{ deck.id }},
                feedback_type: 'too_easy',
                user_input: userInput,
                response_time: responseTime,
                is_correct: true  // æ ‡è®°ä¸ºå¤ªç®€å•æ—¶è®¤ä¸ºæ˜¯æ­£ç¡®çš„
            })
        });

        const result = await response.json();

        if (result.success) {
            moveToNextContent();
        } else {
            alert('æäº¤å¤±è´¥: ' + result.message);
        }
    } catch (error) {
        alert('è¯·æ±‚å¤±è´¥: ' + error.message);
    }
}

// ä¿®æ”¹ showResult å‡½æ•°ï¼Œç§»é™¤ç­”å¯¹ç­”é”™çš„æŒ‰é’®
function showResult(userInput, showedAnswer = false) {
    if (currentStudy.content.length === 0 || currentStudy.currentIndex >= currentStudy.content.length) {
        return;
    }

    const content = currentStudy.content[currentStudy.currentIndex];
    const isCorrect = userInput.toLowerCase() === content.answer.toLowerCase();

    const resultTitle = document.getElementById('resultTitle');
    const userAnswerText = document.getElementById('userAnswerText');
    const correctAnswerText = document.getElementById('correctAnswerText');
    const exampleSection = document.getElementById('exampleSection');
    const exampleText = document.getElementById('exampleText');

    // è®¾ç½®ç»“æœæ ‡é¢˜
    if (showedAnswer) {
        resultTitle.textContent = 'ç­”æ¡ˆå·²æ˜¾ç¤º';
    } else {
        resultTitle.textContent = isCorrect ? 'å›ç­”æ­£ç¡®ï¼' : 'å›ç­”é”™è¯¯';
    }

    // è®¾ç½®ç­”æ¡ˆå¯¹æ¯”
    userAnswerText.textContent = userInput;
    correctAnswerText.textContent = content.answer;

    // è®¾ç½®ç¤ºä¾‹
    if (content.example) {
        exampleText.textContent = content.example;
        exampleSection.style.display = 'block';
    } else {
        exampleSection.style.display = 'none';
    }

    // æ˜¾ç¤ºç»“æœåŒºåŸŸï¼Œä½†åªæ˜¾ç¤ºç®€åŒ–åçš„æŒ‰é’®
    document.getElementById('studyResult').style.display = 'block';
}


// ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå†…å®¹
function moveToNextContent() {
    currentStudy.currentIndex++;

    // æ£€æŸ¥æ˜¯å¦å·²å®Œæˆ
    if (currentStudy.currentIndex >= currentStudy.content.length) {
        completeStudy();
        showCompletionState();
    } else {
        showCurrentContent();
        updateProgress();
    }
}

// åŠ è½½ä¸‹ä¸€ä¸ªå†…å®¹
async function loadNextContent() {
    moveToNextContent();
}

// å®Œæˆå­¦ä¹ 
async function completeStudy() {
    try {
        await fetch('/api/study/unified/complete', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                batch_id: currentStudy.id
            })
        });
    } catch (error) {
        console.error('å®Œæˆå­¦ä¹ å¤±è´¥:', error);
    }
}

// æ›´æ–°è¿›åº¦æ¡
function updateProgress() {
    const total = Math.max(currentStudy.content.length, 1);
    const progress = (currentStudy.currentIndex / total) * 100;

    document.getElementById('progressFill').style.width = `${progress}%`;
    document.getElementById('progressText').textContent =
        `${currentStudy.currentIndex}/${total}`;
}

// æå‰ç»“æŸå­¦ä¹ 
async function endStudyEarly() {
    if (!confirm('ç¡®å®šè¦æå‰ç»“æŸå­¦ä¹ å—ï¼Ÿ')) {
        return;
    }

    try {
        await completeStudy();
        window.location.href = '/';
    } catch (error) {
        alert('ç»“æŸå¤±è´¥: ' + error.message);
    }
}

// æ˜¾ç¤ºç©ºçŠ¶æ€
function showEmptyState() {
    document.getElementById('studyContent').innerHTML = `
        <div class="empty-state">
            <p>æ²¡æœ‰å¯å­¦ä¹ çš„å†…å®¹</p>
            <a href="/" class="btn btn-primary">è¿”å›é¦–é¡µ</a>
        </div>
    `;
    document.getElementById('studyInput').style.display = 'none';
    document.getElementById('studyResult').style.display = 'none';
}

// æ˜¾ç¤ºå®ŒæˆçŠ¶æ€
function showCompletionState() {
    document.getElementById('studyContent').innerHTML = `
        <div class="completion-state">
            <h3>ğŸ‰ å­¦ä¹ å®Œæˆï¼</h3>
            <p>æ‚¨å·²å®Œæˆæœ¬æ¬¡å­¦ä¹ è®¡åˆ’</p>
            <div class="actions">
                <button class="btn btn-primary" onclick="window.location.href='/'">è¿”å›é¦–é¡µ</button>
            </div>
        </div>
    `;
    document.getElementById('studyInput').style.display = 'none';
    document.getElementById('studyResult').style.display = 'none';
}

// é”™è¯¯å¤„ç†
function showError(message) {
    document.getElementById('studyContent').innerHTML = `
        <div class="error-state">
            <p>åŠ è½½å¤±è´¥: ${escapeHtml(message)}</p>
            <button class="btn btn-primary" onclick="startUnifiedStudy({{ deck.id }})">é‡è¯•</button>
            <a href="/" class="btn btn-secondary">è¿”å›é¦–é¡µ</a>
        </div>
    `;
    document.getElementById('studyInput').style.display = 'none';
    document.getElementById('studyResult').style.display = 'none';
}

// HTMLè½¬ä¹‰å‡½æ•°
function escapeHtml(text) {
    const map = {
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#039;'
    };
    return text.replace(/[&<>"']/g, function(m) { return map[m]; });
}

// å›è½¦æäº¤ç­”æ¡ˆ
document.addEventListener('DOMContentLoaded', function() {
    const userInput = document.getElementById('userInput');
    if (userInput) {
        userInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                submitAnswer();
            }
        });
    }
});

// åœ¨ unified_study.html ä¸­æ·»åŠ æ—¶é•¿è®¡æ—¶åŠŸèƒ½
let studyTimerInterval = null;
let studyTimer = null;
let studyStartTime = null;
let totalStudyTime = 0; // å·²è®°å½•çš„å­¦ä¹ æ—¶é—´ï¼ˆç§’ï¼‰
// é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–è®¡æ—¶å™¨
document.addEventListener('DOMContentLoaded', function() {
    startStudyTimer();
    startUnifiedStudy({{ deck.id }});
});

// å¼€å§‹è®¡æ—¶

// å¼€å§‹å­¦ä¹ è®¡æ—¶å™¨
function startStudyTimer() {
    // å¦‚æœå·²ç»æœ‰å¼€å§‹æ—¶é—´ï¼Œè®¡ç®—å·²å­¦ä¹ æ—¶é—´
    if (studyStartTime) {
        const now = new Date();
        totalStudyTime += Math.floor((now - studyStartTime) / 1000);
    }

    studyStartTime = new Date();

    // æ¸…é™¤ç°æœ‰è®¡æ—¶å™¨
    if (studyTimerInterval) {
        clearInterval(studyTimerInterval);
    }

    // å¯åŠ¨æ–°çš„è®¡æ—¶å™¨
    studyTimerInterval = setInterval(updateStudyTimer, 1000);
}

// æ›´æ–°å­¦ä¹ è®¡æ—¶å™¨æ˜¾ç¤º
function updateStudyTimer() {
    if (studyStartTime) {
        const now = new Date();
        const sessionTime = Math.floor((now - studyStartTime) / 1000);
        const totalTime = totalStudyTime + sessionTime;

        const hours = Math.floor(totalTime / 3600);
        const minutes = Math.floor((totalTime % 3600) / 60);
        const seconds = totalTime % 60;

        document.getElementById('studyTimer').textContent =
            `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }
}

// åœ¨é¡µé¢å…³é—­å‰ä¿å­˜å­¦ä¹ æ—¶é—´
window.addEventListener('beforeunload', function() {
    stopStudyTimer();
    if (currentStudy.id && totalStudyTime > 0) {
        updateStudyDuration(totalStudyTime);
    }
});
// æ›´æ–°å­¦ä¹ æ—¶é•¿æ˜¾ç¤º

// æ›´æ–°å­¦ä¹ æ—¶é•¿åˆ°æœåŠ¡å™¨
async function updateStudyDuration(duration) {
    if (!currentStudy.id || duration <= 0) return;

    try {
        await fetch('/api/study/unified/update_duration', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                batch_id: currentStudy.id,
                duration: duration
            })
        });
    } catch (error) {
        console.error('æ›´æ–°å­¦ä¹ æ—¶é•¿å¤±è´¥:', error);
    }
}

// ä¿®æ”¹ moveToNextContent å‡½æ•°ï¼Œåœ¨å­¦ä¹ å®Œæˆæ—¶ä¹Ÿä¿å­˜æ—¶é—´
function moveToNextContent() {
    currentStudy.currentIndex++;

    // æ£€æŸ¥æ˜¯å¦å·²å®Œæˆ
    if (currentStudy.currentIndex >= currentStudy.content.length) {
        completeStudy();
        showCompletionState();
    } else {
        showCurrentContent();
        updateProgress();
        // é‡æ–°å¼€å§‹è®¡æ—¶å™¨ï¼ˆæ¯ä¸ªå†…å®¹é¡¹é‡æ–°è®¡æ—¶ï¼‰
        startStudyTimer();
    }
}

// ä¿®æ”¹ completeStudy å‡½æ•°ä»¥åŒ…å«æ—¶é—´è®°å½•
async function completeStudy() {
    try {
        // åœæ­¢è®¡æ—¶å™¨å¹¶ä¿å­˜æ—¶é—´
        stopStudyTimer();
        if (totalStudyTime > 0) {
            await updateStudyDuration(totalStudyTime);
        }

        await fetch('/api/study/unified/complete', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                batch_id: currentStudy.id
            })
        });
    } catch (error) {
        console.error('å®Œæˆå­¦ä¹ å¤±è´¥:', error);
    }
}
// åœ¨é¡µé¢å¸è½½æ—¶è®°å½•å­¦ä¹ æ—¶é•¿
window.addEventListener('beforeunload', function() {
    stopStudyTimer();
});

// åœ¨å¼€å§‹å­¦ä¹ æ—¶å¯åŠ¨è®¡æ—¶å™¨
document.addEventListener('DOMContentLoaded', function() {
    startStudyTimer();
    // ... å…¶ä»–åˆå§‹åŒ–ä»£ç 
});

</script>
<style>.study-timer {
    background: #3498db;
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-family: 'Courier New', monospace;
    font-weight: bold;
    font-size: 1.1rem;
}

.header-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
}

.session-info {
    display: flex;
    align-items: center;
    gap: 1rem;
}
</style>
{% endblock %}
